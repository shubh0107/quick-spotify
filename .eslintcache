[{"/Users/shubham/dev/quick-spotify/src/reportWebVitals.js":"1","/Users/shubham/dev/quick-spotify/src/App.js":"2","/Users/shubham/dev/quick-spotify/src/index.js":"3","/Users/shubham/dev/quick-spotify/src/SpotifyService.js":"4","/Users/shubham/dev/quick-spotify/src/hooks/useLocalStorage.js":"5","/Users/shubham/dev/quick-spotify/src/pages/utilities/constants.js":"6","/Users/shubham/dev/quick-spotify/src/pages/Login.js":"7","/Users/shubham/dev/quick-spotify/src/pages/Home.js":"8","/Users/shubham/dev/quick-spotify/src/components/index.js":"9","/Users/shubham/dev/quick-spotify/src/components/Button.js":"10","/Users/shubham/dev/quick-spotify/src/components/Modal.js":"11","/Users/shubham/dev/quick-spotify/src/components/Header.js":"12","/Users/shubham/dev/quick-spotify/src/components/selectedTrack.js":"13"},{"size":362,"mtime":1607720098482,"results":"14","hashOfConfig":"15"},{"size":816,"mtime":1616182691929,"results":"16","hashOfConfig":"15"},{"size":500,"mtime":1607720098482,"results":"17","hashOfConfig":"15"},{"size":270,"mtime":1607758139844,"results":"18","hashOfConfig":"15"},{"size":494,"mtime":1607843932365,"results":"19","hashOfConfig":"15"},{"size":1939,"mtime":1616336843226,"results":"20","hashOfConfig":"15"},{"size":2911,"mtime":1616182691934,"results":"21","hashOfConfig":"15"},{"size":10107,"mtime":1616336843225,"results":"22","hashOfConfig":"15"},{"size":194,"mtime":1616336843225,"results":"23","hashOfConfig":"15"},{"size":385,"mtime":1608748806088,"results":"24","hashOfConfig":"15"},{"size":3915,"mtime":1616336843224,"results":"25","hashOfConfig":"15"},{"size":666,"mtime":1616182691932,"results":"26","hashOfConfig":"15"},{"size":4375,"mtime":1616320862157,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"1os3mv1",{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43","usedDeprecatedRules":"30"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46","usedDeprecatedRules":"30"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"30"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/shubham/dev/quick-spotify/src/reportWebVitals.js",[],["58","59"],"/Users/shubham/dev/quick-spotify/src/App.js",[],"/Users/shubham/dev/quick-spotify/src/index.js",[],"/Users/shubham/dev/quick-spotify/src/SpotifyService.js",[],"/Users/shubham/dev/quick-spotify/src/hooks/useLocalStorage.js",[],"/Users/shubham/dev/quick-spotify/src/pages/utilities/constants.js",[],"/Users/shubham/dev/quick-spotify/src/pages/Login.js",["60","61","62","63","64","65"],"import { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { parse, stringifyUrl, stringify } from 'query-string';\nimport {\n  AUTHORIZATION_URL,\n  STATE,\n  ACCESS_TOKEN_ENDPOINT,\n  AUTHORIZATION_QUERY_2\n} from './utilities/constants';\nimport useLocalStorage from '../hooks/useLocalStorage';\nimport { Button } from '../components';\nimport { ReactComponent as Music } from '../assets/music.svg';\n\nconst Login = props => {\n  const [userData, setUserData] = useState(undefined);\n  const [accessToken, setAccessToken] = useLocalStorage('accessToken', '');\n  const [callingAuthApi, setCallingAuthApi] = useState(false);\n  let history = useHistory();\n  // const location = useLocation();\n  // console.log('shubham login location: ', location)\n  if (accessToken !== '') {\n    history.push('/home');\n  }\n\n  const callSpotifyAuthApi = () => {\n    setCallingAuthApi(true);\n    const finalAuthUrl = stringifyUrl({\n      url: AUTHORIZATION_URL,\n      query: AUTHORIZATION_QUERY_2\n    });\n    window.location.href = finalAuthUrl;\n  }\n\n  useEffect(() => {\n    const parsedUrl = parse(window.location.hash);\n    if (parsedUrl.state === STATE) {\n      if (parsedUrl.error) {\n        setCallingAuthApi(false);\n      } else {\n        let accessToken = parsedUrl.access_token;\n        setAccessToken(accessToken);\n      }\n    } else {\n      // setCallingAuthApi(false);\n    }\n  }, [setAccessToken, setCallingAuthApi]);\n\n\n  // function getAccessToken(queryForToken) {\n  //   axios.post(ACCESS_TOKEN_ENDPOINT, stringify(queryForToken)).then(res => {\n  //     setAccessToken(res.data.access_token);\n  //     // setIsAuthenticated(res.data);\n  //   }).catch(err => {\n  //     console.log('ERROR: ', err);\n  //   })\n  // }\n\n  if (accessToken === '') {\n    return (\n      <div className=\"h-screen flex items-center justify-center bg-gray-900\">\n        <div className=\"h-full w-2/3 flex flex-col items-center justify-between py-8 px-6\">\n          <div className=\"text-green-500 text-6xl font-mono\">Quick Spotify</div>\n          <Music />\n        </div>\n        <Button onClick={callSpotifyAuthApi} classes=\"h-full w-1/3 flex items-center justify-center border-t-0 border-b-0 border-r-0 text-3xl\">\n          <span className=\"animate-bounce\">Login</span>\n          {callingAuthApi &&\n            <svg class=\"animate-spin text-white h-6 w-6 ml-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n              <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n              <path class=\"opacity-75\" fill=\"#111927\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n            </svg>\n          }\n        </Button>\n      </div >\n    )\n  }\n\n  return '';\n\n}\n\nexport default Login;","/Users/shubham/dev/quick-spotify/src/pages/Home.js",["66","67","68","69","70"],"import { useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\nimport useLocalStorage from \"../hooks/useLocalStorage\";\nimport { useHistory } from 'react-router-dom';\nimport SpotifyService from '../SpotifyService';\nimport './Home.scss';\n// import { Button } from '../components';\nimport { Header, Modal, SelectedTrack } from '../components';\n\n// import { useTransition, useSpring, animated } from 'react-spring';\n\nimport { AnimatePresence, AnimateSharedLayout, motion } from 'framer-motion';\n\nconst Home = props => {\n\n  let history = useHistory();\n  const [accessToken, setAccessToken] = useLocalStorage('accessToken');\n  const [topTracks, setTopTracks] = useState(null);\n  const [currentTrack, setCurrentTrack] = useState(null);\n  const [modalVisibility, setModalVisibility] = useState(true);\n  const [selectedTrack, setSelectedTrack] = useState(null);\n\n  const spotify = useRef(null);\n\n  const [openModal, setOpenModal] = useState(false);\n\n\n  useEffect(() => {\n    if (!accessToken || accessToken === '') {\n      history.push('/');\n    } else {\n      spotify.current = new SpotifyService(accessToken);\n      let promise1 = spotify.current.spotifyApi.getMyTopTracks({\n        limit: 50,\n        time_range: 'short_term',\n        offset: 0\n      });\n      let promise2 = spotify.current.spotifyApi.getMyTopTracks({\n        limit: 50,\n        time_range: 'medium_term',\n        offset: 0,\n      });\n      let promise3 = spotify.current.spotifyApi.getMyTopTracks({\n        limit: 50,\n        time_range: 'long_term',\n        offset: 0\n      });\n\n      Promise.all([promise1, promise2, promise3])\n        .then(res => {\n          console.log('response: ', res);\n          setTopTracks(res);\n        }).catch(err => {\n          console.log('error: ', err);\n          if (err.status === 401) {\n            setAccessToken('');\n          }\n        })\n    }\n  }, [accessToken, history, spotify, setAccessToken])\n\n  function getTrackDetails(trackId) {\n    return spotify.current.spotifyApi.getTrack(trackId);\n  }\n\n  if (!topTracks) {\n    return <div className=\"h-screen bg-gray-900 text-white text-center\">Loading....</div>\n  }\n\n  if (topTracks) {\n    // return <div className=\"h-full grid grid-cols-2 place-items-auto bg-gray-900 text-white p-10\">\n    return (\n      <div className=\"relative\">\n        <AnimateSharedLayout type=\"crossfade\">\n          <Header />\n\n          <div className=\"min-h-screen h-full flex justify-between bg-gray-900 text-white px-10 pb-10\">\n            <motion.div\n              className=\"pt-5 px-5 -mx-5 w-1/2\"\n              initial={false}\n              animate={{\n                opacity: selectedTrack ? 0 : 1,\n              }}\n            >\n              <h3 className=\"mb-2 sticky\">Last Month</h3>\n              <TopSongs\n                tracks={topTracks[0].items}\n                currentTrack={currentTrack}\n                setCurrentTrack={setCurrentTrack}\n                getTrackDetails={getTrackDetails}\n                setSelectedTrack={setSelectedTrack}\n              />\n              <h3 className=\"mb-2\">Last 6 Months</h3>\n              <TopSongs\n                tracks={topTracks[1].items}\n                currentTrack={currentTrack}\n                setCurrentTrack={setCurrentTrack}\n                getTrackDetails={getTrackDetails}\n                setSelectedTrack={setSelectedTrack}\n              />\n              <h3 className=\"mb-2\">All Time</h3>\n              <TopSongs\n                tracks={topTracks[2].items}\n                currentTrack={currentTrack}\n                setCurrentTrack={setCurrentTrack}\n                getTrackDetails={getTrackDetails}\n                setSelectedTrack={setSelectedTrack}\n              />\n            </motion.div>\n\n            <div className=\"py-5 w-1/2\">\n              <AnimatePresence>\n                {currentTrack ?\n                  <TrackPreview track={currentTrack}\n                    getTrackDetails={getTrackDetails}\n                    accessToken={accessToken}\n                    selectedTrack={selectedTrack}\n                  /> : ''\n                }\n              </AnimatePresence>\n            </div>\n            {/* <div> */}\n            {/* <Button onClick={() => setOpenModal(true)}>Open</Button> */}\n            {/* </div> */}\n            <Modal visible={modalVisibility} setModalVisibility={setModalVisibility} />\n          </div>\n          <AnimatePresence>\n            {selectedTrack ?\n              <SelectedTrack\n                selectedTrack={selectedTrack}\n                setSelectedTrack={setSelectedTrack}\n                accessToken={accessToken}\n              />\n              : ''\n            }\n          </AnimatePresence>\n        </AnimateSharedLayout>\n      </div>\n    )\n  }\n}\n\n\n\nconst TopSongs = ({ tracks, currentTrack, setCurrentTrack, getTrackDetails, setSelectedTrack }) => {\n  const currentAudio = useRef(null);\n\n  function playAudio(track) {\n    // let isPreviousAudioPlaying = currentAudio.current.currentTime > 0 &&\n    //  !currentAudio.current.paused && !currentAudio.current.ended && currentAudio.current.readyState > 2;\n\n    // if (isPreviousAudioPlaying) {\n    //   currentAudio.current.pause();\n    // }\n\n    // if (currentAudio.current && currentAudio.current.currentTime > 0) {\n    //   currentAudio.current.pause();\n    // }\n    setCurrentTrack(track);\n    let { id, preview_url } = track;\n\n    if (preview_url) {\n      // currentAudio.current = new Audio(preview_url);\n      // currentAudio.current.play();\n    } else {\n      // getTrackDetails(`${id}?market=from_token`).then(trackDetails => {\n      //   console.log('track data: ', trackDetails);\n      //   // currentAudio.current = new Audio(trackDetails.preview_url);\n      //   // currentAudio.current.play();\n      // }).catch(err => {\n      //   console.log('error: ', err);\n      // })\n    }\n  }\n\n  function stopAudio(url) {\n    // currentAudio.current.pause();\n    // setCurrentTrack(null)\n  }\n\n  return (\n    <div className=\"grid grid-cols-5 lg:grid-cols-10 mb-5\">\n      {tracks.map(track => {\n        const { id, name, album } = track;\n        const { images } = album;\n        return (\n          <motion.div\n            // layout\n            key={id}\n            // initial={{ opacity: 1 }}\n            // className=\"z-0 transform ease-in-out transition hover:scale-150 hover:z-20 hover:shadow-lg\"\n            className=\"z-0 cursor-pointer\"\n            // style={{ opacity: currentTrack ? 1 : 0 }}\n            onMouseEnter={e => playAudio(track)}\n            onMouseLeave={e => stopAudio(track)}\n            whileHover={{ scale: 1.5, zIndex: 2 }}\n            onClick={() => setSelectedTrack(track)}\n\n          >\n            <img src={images[0].url} alt=\"song-img\" />\n          </motion.div>\n        )\n      })}\n    </div>\n  )\n}\n\n\nconst TrackPreview = ({ track, getTrackDetails, accessToken, selectedTrack }) => {\n  let { id, preview_url } = track;\n  const currentAudio = useRef(null);\n\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n\n\n\n  useEffect(() => {\n\n    function playAudio(url) {\n      if (url) {\n        currentAudio.current = new Audio(url);\n        // currentAudio.current.play();\n      } else {\n        axios.get(`https://api.spotify.com/v1/tracks/${id}?market=from_token`, {\n          headers: { 'Authorization': `Bearer ${accessToken}` },\n          cancelToken: source.token\n        }).then(({ data }) => {\n          console.log('playng audio: ', data);\n          if (data.preview_url) {\n            playAudio(data.preview_url);\n          }\n        }).catch(err => {\n          if (axios.isCancel(err)) {\n            console.log('Request canceled', err.message);\n          } else {\n            console.log('error: ', err);\n          }\n        })\n      }\n\n    }\n\n    if (currentAudio.current) {\n      // currentAudio.current.pause();\n    }\n\n    playAudio(preview_url);\n\n    return () => {\n      source.cancel('New track received.');\n\n      if (currentAudio.current) {\n        // currentAudio.current.pause();\n      }\n    }\n  }, [id, preview_url, getTrackDetails, accessToken, source]);\n\n  if (track) {\n    const { id, name, album, artists } = track;\n    const { images } = album;\n    const artistName = artists.reduce(((completeName, artist, index) => {\n      if (index === artists.length - 1 && artists.length > 1) {\n        completeName += ' & ';\n      } else {\n        completeName += index !== 0 ? ', ' : '';\n      }\n      return completeName += ` ${artist.name}`\n    }), '');\n    return (\n      <motion.div\n        className=\"sticky top-1/4 lg:top-32 md:m-2 lg:m-10 float-right lg:my-0\"\n        initial={{ x: 500, opacity: 0 }}\n        animate={{ x: 0, opacity: 1 }}\n        exit={{ opacity: 0 }}\n        // exit={{ scale: 0, opacity: 0, duration: 0.1 }}\n        // transition={{\n        //   exit: {\n        //     duration: 2\n        //   }\n        // }}\n        key={`current-track-main-div-${id}`}\n        layoutId={`selected-track-parent-${id}`}\n\n      >\n        <motion.div className=\"w-full z-10\"\n          key={`small-preview-${id}`}\n          layoutId={`selected-track-image-${id}`}\n          animate={{ opacity: selectedTrack ? 0 : 1 }}\n        >\n          <img src={images[0].url} alt={name} />\n        </motion.div>\n        <div className=\"overflow-hidden mt-2\">\n          <motion.div\n            initial={{ height: 0, y: -60 }}\n            animate={{\n              height: 'auto',\n              y: 0,\n              transition: {\n                delay: 0.3,\n                duration: 0.2,\n              }\n            }}\n          >\n            <motion.h2\n              className=\"inline-flex text-2xl leading-tight\"\n              layoutId={`selected-track-name-${id}`}\n            >\n              {name}\n            </motion.h2>\n            <br />\n            <motion.h3\n              className=\"inline-flex text-sm italic\"\n              layoutId={`selected-track-artist-name-${id}`}\n              transition={{\n                delay: 0.6\n              }}\n            >\n              {artistName}\n            </motion.h3>\n          </motion.div>\n        </div>\n      </motion.div>\n    )\n  }\n\n  return '';\n}\n\n\nexport default Home;","/Users/shubham/dev/quick-spotify/src/components/index.js",[],"/Users/shubham/dev/quick-spotify/src/components/Button.js",[],"/Users/shubham/dev/quick-spotify/src/components/Modal.js",[],"/Users/shubham/dev/quick-spotify/src/components/Header.js",["71"],"import { Button } from '../components';\nimport useLocalStorage from '../hooks/useLocalStorage';\nimport { useHistory } from 'react-router-dom';\n\n\nconst Header = props => {\n  const [accessToken, setAccessToken] = useLocalStorage('accessToken');\n  let history = useHistory();\n\n  async function logout() {\n    await setAccessToken('');\n    history.push('/');\n  }\n\n  return <header className=\"flex justify-between h-full sticky top-0 px-6 py-4 z-30 bg-gray-900 border-b border-green-500\">\n    <h1 className=\"text-3xl text-green-500 font-mono\">Quick Spotify</h1>\n    <Button onClick={logout} classes=\"\">\n      Logout\n    </Button>\n  </header>\n\n\n}\n\n\n\nexport default Header;","/Users/shubham/dev/quick-spotify/src/components/selectedTrack.js",["72"],{"ruleId":"73","replacedBy":"74"},{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","severity":1,"message":"78","line":2,"column":8,"nodeType":"79","messageId":"80","endLine":2,"endColumn":13},{"ruleId":"77","severity":1,"message":"81","line":3,"column":22,"nodeType":"79","messageId":"80","endLine":3,"endColumn":33},{"ruleId":"77","severity":1,"message":"82","line":4,"column":31,"nodeType":"79","messageId":"80","endLine":4,"endColumn":40},{"ruleId":"77","severity":1,"message":"83","line":8,"column":3,"nodeType":"79","messageId":"80","endLine":8,"endColumn":24},{"ruleId":"77","severity":1,"message":"84","line":16,"column":10,"nodeType":"79","messageId":"80","endLine":16,"endColumn":18},{"ruleId":"77","severity":1,"message":"85","line":16,"column":20,"nodeType":"79","messageId":"80","endLine":16,"endColumn":31},{"ruleId":"77","severity":1,"message":"86","line":25,"column":10,"nodeType":"79","messageId":"80","endLine":25,"endColumn":19},{"ruleId":"77","severity":1,"message":"87","line":25,"column":21,"nodeType":"79","messageId":"80","endLine":25,"endColumn":33},{"ruleId":"77","severity":1,"message":"88","line":146,"column":9,"nodeType":"79","messageId":"80","endLine":146,"endColumn":21},{"ruleId":"77","severity":1,"message":"89","line":160,"column":11,"nodeType":"79","messageId":"80","endLine":160,"endColumn":13},{"ruleId":"77","severity":1,"message":"90","line":184,"column":21,"nodeType":"79","messageId":"80","endLine":184,"endColumn":25},{"ruleId":"77","severity":1,"message":"91","line":33,"column":9,"nodeType":"79","messageId":"80","endLine":33,"endColumn":16},{"ruleId":"92","severity":1,"message":"93","line":33,"column":6,"nodeType":"94","endLine":33,"endColumn":8,"suggestions":"95"},"no-native-reassign",["96"],"no-negated-in-lhs",["97"],"no-unused-vars","'axios' is defined but never used.","Identifier","unusedVar","'useLocation' is defined but never used.","'stringify' is defined but never used.","'ACCESS_TOKEN_ENDPOINT' is defined but never used.","'userData' is assigned a value but never used.","'setUserData' is assigned a value but never used.","'openModal' is assigned a value but never used.","'setOpenModal' is assigned a value but never used.","'currentAudio' is assigned a value but never used.","'id' is assigned a value but never used.","'name' is assigned a value but never used.","'spotify' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'artists'. Either include it or remove the dependency array.","ArrayExpression",["98"],"no-global-assign","no-unsafe-negation",{"desc":"99","fix":"100"},"Update the dependencies array to be: [artists]",{"range":"101","text":"102"},[1268,1270],"[artists]"]